local a=peripheral.find("digitizer")local b=peripheral.find("minecraft:chest")local function c(d)return a.getIDInfo(d).item.count end;local function e(f)local g=0;for h,i in pairs(b.list())do if i.name==f then g=g+i.count end end;return g end;local function j(k)local l=0;for m,d in ipairs(k)do if a.getItemDetail(1)then a.pushItems(peripheral.getName(b),1)if a.getItemDetail(1)then print("Bank is full! Upgrade Storage!")error("Bank is full!")end end;local n,i=pcall(function()return a.getIDInfo(d).item end)if n then a.rematerialize(d)a.pushItems(peripheral.getName(b),1)else return"Unable to find id for materialization"end end;return l end;local function o(p)if e(CONFIG.CURRENCYITEM)<p then print("Not enough Currency in Inventory!")error("Bank is too poor!")end;local q={}for h=1,b.size()do local r=b.getItemDetail(h)if r and r.name==CONFIG.CURRENCYITEM then local s=math.min(p,CONFIG.CURRENCYSTACKSIZE)b.pushItems(peripheral.getName(a),h,s)q[#q+1]=a.digitize()p=p-s;if p==0 then break end end end;return q end;return{getCurrency=e,digitizeAmount=o,materializeItems=j,getCurrencyInId=c}
