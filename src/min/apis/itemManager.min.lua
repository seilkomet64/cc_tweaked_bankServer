local a=peripheral.find("digitizer")local b={peripheral.find("minecraft:chest")}local function c(d)local e,f=pcall(function()return a.getIDInfo(d).item.count end)if e then return f else return nil end end;local function g(h)local i=0;for j,k in pairs(b)do local l=k.list()for j,m in pairs(l)do if m.name==h then i=i+m.count end end end;return i end;local function n(o)local p=0;for j,d in ipairs(o)do local q=a.getItemDetail(1)if q then local r=q.count;for j,k in pairs(b)do r=r-a.pushItems(peripheral.getName(k),1)if r==0 then break end end;if r>0 then print("Bank is full! Upgrade Storage!")error("Bank is full!")end end;local s=c(d)if s then a.rematerialize(d)p=p+s;for j,k in pairs(b)do s=s-a.pushItems(peripheral.getName(k),1)if s==0 then break end end else return"Unable to find id for materialization"end end;return p end;local function t(u)if g(CONFIG.CURRENCYITEM)<u then print("Not enough Currency in Inventory!")error("Bank is too poor!")end;local v={}for j,k in pairs(b)do local w=k.size()for x=1,w do local y=k.getItemDetail(x)if y and y.name==CONFIG.CURRENCYITEM then local z=math.min(u,CONFIG.CURRENCYSTACKSIZE)k.pushItems(peripheral.getName(a),x,z)v[#v+1]=a.digitize()u=u-z;if u==0 then break end end end;if u==0 then break end end;return v end;return{getCurrency=g,digitizeAmount=t,materializeItems=n,getCurrencyInId=c}
