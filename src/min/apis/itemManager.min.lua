local a=peripheral.find("digitizer")local b=peripheral.find("minecraft:chest")local function c(d)return a.getIDInfo(d).item.count end;local function e(f)local g=0;for h,i in pairs(b.list())do if i.name==f then g=g+i.count end end;return g end;local function j(k)local l=0;for m,d in ipairs(k)do if a.getItemDetail(1)then a.pushItems(peripheral.getName(b),1)if a.getItemDetail(1)then print("Bank is full! Upgrade Storage!")error("Bank is full!")end end;local i=a.getIDInfo(d).item;l=l+i.count;a.rematerialize(d)a.pushItems(peripheral.getName(b),1)end;return l end;local function n(o)if e(CONFIG.CURRENCYITEM)<o then print("Not enough Currency in Inventory!")error("Bank is too poor!")end;local p={}for h=1,b.size()do local q=b.getItemDetail(h)if q and q.name==CONFIG.CURRENCYITEM then local r=math.min(o,CONFIG.CURRENCYSTACKSIZE)b.pushItems(peripheral.getName(a),h,r)p[#p+1]=a.digitize()o=o-r;if o==0 then break end end end;return p end;return{getCurrency=e,digitizeAmount=n,materializeItems=j,getCurrencyInId=c}
